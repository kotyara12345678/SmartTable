<!-- AI Panel Component -->
<div class="ai-panel" id="aiPanel">
  <div class="ai-panel-header">
    <span>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px;margin-right:8px;vertical-align:middle;">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 2a10 10 0 1010 10A10 10 0 0012 2z"/>
        <path d="M12 8v4l3 3"/>
      </svg>
      ИИ Помощник
    </span>
    <div style="display:flex;gap:4px;">
      <button class="btn-close-ai" id="btnClearChat" title="Очистить историю">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;">
          <polyline points="3,6 5,6 21,6"/>
          <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
        </svg>
      </button>
      <button class="btn-close-ai" id="btnCloseAI">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
  </div>
  <div class="ai-panel-content">
    <div class="ai-chat" id="aiChat">
      <div class="ai-message ai-message-assistant">
        Привет! Я ИИ-помощник SmartTable. Чем могу помочь?
        <div class="ai-suggestions">
          <button class="ai-suggestion" data-action="analyze">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;margin-right:8px;">
              <line x1="18" y1="20" x2="18" y2="10"/>
              <line x1="12" y1="20" x2="12" y2="4"/>
              <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
            Проанализировать данные
          </button>
          <button class="ai-suggestion" data-action="formula">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;margin-right:8px;">
              <path d="M12 20h9"/>
              <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
            </svg>
            Создать формулу
          </button>
          <button class="ai-suggestion" data-action="clean">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;margin-right:8px;">
              <polyline points="3,6 5,6 21,6"/>
              <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
            </svg>
            Очистить данные
          </button>
        </div>
      </div>
    </div>
    <div class="ai-input-wrapper">
      <!-- Быстрые ответы (над строкой ввода) -->
      <div class="ai-quick-replies" id="aiQuickReplies"></div>
      <!-- Переключатель режимов -->
      <div class="ai-mode-toggle" id="aiModeToggle">
        <span class="ai-mode-label">Режим:</span>
        <button class="ai-mode-btn-toggle active" id="btnAssistantMode" title="Режим ассистента">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px;">
            <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
          </svg>
        </button>
        <button class="ai-mode-btn-toggle" id="btnAgentMode" title="Режим агента">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px;">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <path d="M9 9h6v6H9z"/>
          </svg>
        </button>
      </div>
      <input type="text" class="ai-input" id="aiInput" placeholder="Спросите ИИ о чём-нибудь...">
      <button class="btn-ai-send" id="btnAiSend">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
        </svg>
      </button>
    </div>
    <!-- Переключатель режимов (предложение - под сообщением) -->
    <div class="ai-mode-switcher" id="aiModeSwitcher" style="display:none;">
      <div class="ai-mode-switcher-text">Переключиться в режим агента?</div>
      <div class="ai-mode-switcher-buttons">
        <button class="ai-mode-btn ai-mode-btn-confirm" id="btnConfirmModeSwitch">Да</button>
        <button class="ai-mode-btn ai-mode-btn-cancel" id="btnCancelModeSwitch">Нет</button>
      </div>
    </div>
  </div>
</div>
