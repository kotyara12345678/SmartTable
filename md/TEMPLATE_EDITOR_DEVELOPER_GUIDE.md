# ‚ú® –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

## üìã –û–±–∑–æ—Ä –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ë—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ —Ç–∞–±–ª–∏—Ü —Å –∫—Ä–∞—Å–∏–≤—ã–º UI –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ù–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã

#### 1. **TemplateFieldEditorWidget** 
–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è —à–∞–±–ª–æ–Ω–∞.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/ui/templates/templates/template_ui.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```python
TemplateFieldEditorWidget(
    field_data: dict = None,  # {"name", "pattern", "format_string", "is_key_field", "description"}
    parent = None
)
```

**–ú–µ—Ç–æ–¥—ã:**
- `init_ui()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `get_field_data()` -> dict - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è
- `emit_removed()` - —Å–∏–≥–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏—è

**–°–∏–≥–Ω–∞–ª—ã:**
- `removed` - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- QLineEdit –¥–ª—è –∏–º–µ–Ω–∏
- QComboBox –¥–ª—è —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (9 —Ç–∏–ø–æ–≤)
- QLineEdit –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞
- QCheckBox –¥–ª—è –∫–ª—é—á–µ–≤–æ–≥–æ –ø–æ–ª—è
- QTextEdit –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
- QPushButton –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

---

#### 2. **TemplateCreatorDialog**
–ì–ª–∞–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/ui/templates/templates/template_ui.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```python
TemplateCreatorDialog(parent=None)
```

**–ú–µ—Ç–æ–¥—ã:**
- `init_ui()` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `add_field()` - –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ –ø–æ–ª–µ (TemplateFieldEditorWidget)
- `remove_field(field_widget)` - —É–¥–∞–ª—è–µ—Ç –ø–æ–ª–µ
- `reset_fields()` - –æ—á–∏—â–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è
- `validate_input()` -> bool - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
- `create_template()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–°–∏–≥–Ω–∞–ª—ã:**
- `template_created(str)` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–º—è —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

**UI –°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ú® –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è                 ‚îÇ
‚îÇ ‚îú‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ: [____________________] ‚îÇ
‚îÇ ‚îî‚îÄ –û–ø–∏—Å–∞–Ω–∏–µ: [____________________ ]‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ üìã –ü–æ–ª—è —à–∞–±–ª–æ–Ω–∞        ‚ûï –î–æ–±–∞–≤–∏—Ç—å  ‚îÇ
‚îÇ ‚îú‚îÄ –ü–æ–ª–µ 1 [–£–¥–∞–ª–∏—Ç—å üóëÔ∏è]             ‚îÇ
‚îÇ ‚îú‚îÄ –ü–æ–ª–µ 2 [–£–¥–∞–ª–∏—Ç—å üóëÔ∏è]             ‚îÇ
‚îÇ ‚îî‚îÄ –ü–æ–ª–µ 3 [–£–¥–∞–ª–∏—Ç—å üóëÔ∏è]             ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ [–û—Ç–º–µ–Ω–∞] [‚ü≤ –û—á–∏—Å—Ç–∏—Ç—å] [‚úì –°–æ–∑–¥–∞—Ç—å]  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- –í—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∏–º–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–º–µ–Ω
- –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–æ –ø–æ–ª–µ

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `user_templates/templates/`
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `user_templates/metadata/`
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–∞

---

#### 3. **TemplateEditorDialog**
–î–∏–∞–ª–æ–≥ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/ui/templates/templates/template_ui.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```python
TemplateEditorDialog(
    parent=None,
    template_name: str = None  # –ï—Å–ª–∏ None, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä
)
```

**–ú–µ—Ç–æ–¥—ã:**
- `show_template_selector()` - –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞
- `init_ui()` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `add_field(field_data)` - –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ
- `remove_field(field_widget)` - —É–¥–∞–ª—è–µ—Ç –ø–æ–ª–µ
- `save_template()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–°–∏–≥–Ω–∞–ª—ã:**
- `template_updated(str)` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–ª–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

#### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π TemplateGalleryDialog**

**–ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏:**
- `‚ú® –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π` ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç TemplateCreatorDialog
- `‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å` ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç TemplateEditorDialog

**–ú–µ—Ç–æ–¥—ã:**
```python
def create_new_template(self)
    """–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞"""

def edit_template(self)
    """–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞"""
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```python
dialog = TemplateCreatorDialog(self)
if dialog.exec_() == QDialog.Accepted:
    self.load_templates()
```

---

## üé® UI/–£–• –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

### –î–∏–∑–∞–π–Ω —Å–æ–≥–ª–∞—Å–Ω–æ:
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª-–¥–∏–∑–∞–π–Ω
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:
  - –°–∏–Ω–∏–π (#1976d2) - –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
  - –û—Ä–∞–Ω–∂–µ–≤—ã–π (#f57c00) - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –ó–µ–ª–µ–Ω—ã–π (#4CAF50) - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
  - –°–µ—Ä—ã–π (#f5f5f5) - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:
```css
/* –ì—Ä—É–ø–ø—ã */
QGroupBox {
    border: 1px solid #ddd;
    border-radius: 5px;
    font-weight: bold;
}

/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è */
QPushButton {
    border-radius: 3px;
    padding: 5px;
    font-weight: bold;
}

/* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
QLineEdit, QTextEdit {
    border: 1px solid #bbb;
    border-radius: 3px;
    padding: 5px;
}
```

---

## üìù –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä |
|-----|----------|--------|---------|
| text | "text" | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π | "–ò–≤–∞–Ω" |
| number | "number" | #,##0.00 | 1234.56 |
| date | "date" | dd.mm.yyyy | 15.01.2024 |
| time | "time" | HH:mm:ss | 14:30:00 |
| email | "email" | - | user@example.com |
| phone | "phone" | - | +7 999 123-45-67 |
| url | "url" | - | https://example.com |
| currency | "currency" | #,##0.00 ‚ÇΩ | 1234,56 ‚ÇΩ |
| percentage | "percentage" | 0.00% | 25.50% |

---

## üìÅ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —à–∞–±–ª–æ–Ω–∞

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã:**
```
pysheets/src/ui/templates/templates/templates/
```

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã:**
```
pysheets/user_templates/templates/
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å —Ñ–ª–∞–≥–æ–º `is_user_template=True`:

```python
self.template_manager.save_template(template, is_user_template=True)
```

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç JSON —Ñ–∞–π–ª –≤ `user_templates/templates/`
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `user_templates/metadata/`
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8

---

## üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

```
–ì–∞–ª–µ—Ä–µ—è ‚Üí [‚ú® –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π]
    ‚Üì
TemplateCreatorDialog –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –û–ø–∏—Å–∞–Ω–∏–µ
- –ü–æ–ª—è (–∏–º—è, —Ç–∏–ø, —Ñ–æ—Ä–º–∞—Ç, –∫–ª—é—á–µ–≤–æ–µ)
    ‚Üì
[‚úì –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω]
    ‚Üì
–í–∞–ª–∏–¥–∞—Ü–∏—è ‚úì
    ‚Üì
ExportTemplate —Å–æ–∑–¥–∞–µ—Ç—Å—è
    ‚Üì
template_manager.save_template(template, is_user_template=True)
    ‚Üì
–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
    ‚Üì
–°–∏–≥–Ω–∞–ª template_created –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
    ‚Üì
–ì–∞–ª–µ—Ä–µ—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
    ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ"
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

```
–ì–∞–ª–µ—Ä–µ—è ‚Üí –í—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω ‚Üí [‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å]
    ‚Üì
TemplateEditorDialog –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
    ‚Üì
–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç:
- –û–ø–∏—Å–∞–Ω–∏–µ
- –ü–æ–ª—è (–∏–º—è, —Ç–∏–ø, —Ñ–æ—Ä–º–∞—Ç, –∫–ª—é—á–µ–≤–æ–µ)
- –î–æ–±–∞–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç –ø–æ–ª—è
    ‚Üì
[üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è]
    ‚Üì
–í–∞–ª–∏–¥–∞—Ü–∏—è ‚úì
    ‚Üì
ExportTemplate –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
    ‚Üì
template_manager.save_template(template, is_user_template=True)
    ‚Üì
–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
    ‚Üì
–°–∏–≥–Ω–∞–ª template_updated –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
    ‚Üì
–ì–∞–ª–µ—Ä–µ—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
    ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ"
```

---

## üß™ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å–æ–∑–¥–∞–Ω–∏—è

```python
from src.ui.templates.templates import TemplateCreatorDialog

dialog = TemplateCreatorDialog(parent=self)
dialog.template_created.connect(self.on_template_created)

if dialog.exec_() == QDialog.Accepted:
    # –®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
    pass
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```python
from src.ui.templates.templates import TemplateEditorDialog

dialog = TemplateEditorDialog(parent=self, template_name="–ú–æ–π —à–∞–±–ª–æ–Ω")
dialog.template_updated.connect(self.on_template_updated)

if dialog.exec_() == QDialog.Accepted:
    # –®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω
    pass
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—è

```python
from src.ui.templates.templates import TemplateFieldEditorWidget

field_widget = TemplateFieldEditorWidget({
    "name": "–ò–º—è",
    "pattern": "text",
    "format_string": "",
    "is_key_field": False,
    "description": "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞"
})

field_data = field_widget.get_field_data()
# Returns: {"name": "–ò–º—è", "pattern": "text", ...}
```

---

## üîå –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è

### –í `__init__.py`

```python
from .template_ui import (
    TemplateCreatorDialog,
    TemplateEditorDialog,
    TemplateFieldEditorWidget
)

__all__ = [
    ...
    'TemplateCreatorDialog',
    'TemplateEditorDialog',
    'TemplateFieldEditorWidget'
]
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ —à–∞–±–ª–æ–Ω–∞
- ‚ùå –ü—É—Å—Ç–æ
- ‚ùå –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å)
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ
- ‚úÖ –î–æ 100 —Å–∏–º–≤–æ–ª–æ–≤

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- ‚ùå –ò–º—è –ø–æ–ª—è –ø—É—Å—Ç–æ
- ‚úÖ –ò–º—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç
- ‚úÖ –¢–∏–ø –∏–∑ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ —Å–ø–∏—Å–∫–∞
- ‚úÖ –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–æ –ø–æ–ª–µ

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
- ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞

---

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

```python
if not self.validate_input():
    return  # –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞

if self.template_manager.save_template(template, is_user_template=True):
    # –£—Å–ø–µ—à–Ω–æ
    self.template_created.emit(name)
else:
    # –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    QMessageBox.critical(self, "–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å")
```

### –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

```python
try:
    self.template = self.template_manager.get_template(template_name)
except Exception as e:
    QMessageBox.critical(self, "–û—à–∏–±–∫–∞", f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å: {e}")
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### PyQt5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- QDialog
- QVBoxLayout / QHBoxLayout / QFormLayout
- QLineEdit, QTextEdit, QComboBox, QCheckBox
- QPushButton, QLabel, QGroupBox
- QMessageBox, QInputDialog, QFileDialog
- QWidget, QScrollArea

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- TemplateManager (–∏–∑ template_manager.py)
- ExportTemplate, TemplateField, DataPattern (–∏–∑ template_manager.py)
- CellRange (–∏–∑ template_manager.py)

---

## üöÄ –í—ã–ø—É—Å–∫

### –í–µ—Ä—Å–∏—è
- –í–ø–µ—Ä–≤—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –≤–µ—Ä—Å–∏–∏ X.X.X
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π
- –ù–µ –ª–æ–º–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –°—Ç–∞—Ç—É—Å
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω
- ‚úÖ –ö–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –°–∏–≥–Ω–∞–ª—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ runtime

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](TEMPLATES_CREATOR_GUIDE.md)
- [–ì–∞–ª–µ—Ä–µ—è —à–∞–±–ª–æ–Ω–æ–≤](../README.md)
- [–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç](../README.md)
